{"version":3,"sources":["webpack://@raafirivero/kine-top/webpack/bootstrap","webpack://@raafirivero/kine-top/./forum.js","webpack://@raafirivero/kine-top/external \"flarum.core\"","webpack://@raafirivero/kine-top/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@raafirivero/kine-top/external \"flarum.core.compat['components/HeaderPrimary']\"","webpack://@raafirivero/kine-top/external \"flarum.core.compat['components/PostStreamScrubber']\"","webpack://@raafirivero/kine-top/external \"flarum.core.compat['extend']\""],"names":["ktoprow","document","getElementById","ktopheader","showcase","app","newslist","newsurl","localurl","loadinga","view","vnode","m","src","alt","mount","kData","content","fetch","request","method","url","then","data","htmlEntities","str","String","replace","Newscontent","oninit","onbeforeremove","dom","classList","add","Promise","resolve","setTimeout","id","map","item","href","link","title","rendered","toprow","showcaseurl","tempvideo","tempser","metas","embedcode","pullmeta","videolink","encode","pullclip","metarows","metalist","director","push","dp","editor","kinecamera","uri","ri","RegExp","vimeo","test","res","encodeURIComponent","cliphtml","fingaz","fingerlist","step","finger","ShowClip","ID","trust","beenclicked","addEventListener","gothere","body","removeEventListener","extend","DiscussionPage","prototype","qscrub","element","querySelector","scrubHeight","scrollHeight","headHeight","navMargin","parseInt","window","getComputedStyle","getPropertyValue","sticky","fheight","offsetHeight","docheight","stoppingPlace","holdscrub","scrollY","remove","HeaderPrimary","items"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","//export * from './src/forum';\nimport { extend } from 'flarum/extend';\nimport { Component } from '@flarum/core/forum';\nimport HeaderPrimary from 'flarum/components/HeaderPrimary';\nimport PostStreamScrubber from 'flarum/components/PostStreamScrubber';\nimport DiscussionPage from 'flarum/components/DiscussionPage';\n\n\n\n// this is the div I inserted into the header inside th Flarum admin page.\nvar ktoprow = document.getElementById('ktoprow');\nvar ktopheader = document.getElementById('ktopheader');\nvar showcase = document.getElementById('showcase');\nvar app = document.getElementById('app');\nvar newslist = document.getElementById('newslist');\nvar newsurl = \"http://comm.site/blog/wp-json/wp/v2/posts/?categories=19&per_page=5&_fields=title,link\";\nvar localurl = \"http://comm.site/blog/_junk/newslist.json\";\n\n//loading animation\n\nvar loadinga = {\n    view: function(vnode) {  \n        return  m(\"img\", {src: \"http://comm.site/blog/_img/kcanim.gif\", class: \"kload\", alt:\"loading\"})\n        //return  m(\"p\", \"hello detroit!\");\n    }\n}\nm.mount(showcase, loadinga);\n\n\nvar kData = {\n    content:[],\n    fetch: function() {\n        m.request({\n            method: \"GET\",\n            url: newsurl,\n        })\n        .then(function(data) {\n            kData.content = data\n        })\n    }\n}\n\nfunction htmlEntities(str) {\n    return String(str).replace(/&#8211;/g,'-').replace(/&amp;/g, '&').replace(/&quot;/g, '\"');\n}\n\nvar Newscontent = {\n    oninit: kData.fetch(),\n    onbeforeremove: function(vnode) {\n        vnode.dom.classList.add(\"fade-out\")\n        return new Promise(function(resolve) {\n            setTimeout(resolve, 1000)\n        })\n    },\n    view: function(vnode) {      \n        return [\n            m(\"h2\", {class: \"newstitle\"}, \"Latest News\"),\n            m(\"ul\",{id:\"listul\",class: \"listholder\"}, [\n                kData.content.map(function(item) {\n                return  m(\"li\", [\n                            m(\"a\", {href: item.link}, htmlEntities(item.title.rendered)),\n                        ])\n                    \n                \n                })\n            ])\n        ]\n        \n    }   \n}\nm.mount(newslist, Newscontent);\n\nvar ktoprow = document.getElementById('ktoprow');\nvar toprow = {\n    view: function(vnode) {\n        return m(\"menu\", {class: \"container\"}, [\n            m(\"span\",{class:\"slogan\"},\"KineCommunity was made by Kinefinity camera owners for Kinefinity camera owners.\"),\n            m(\"a\",{class:\"toplink\",href:\"#header\"},\"Forum\"),\n            m(\"a\",{class:\"toplink\",href:\"/showcase/\"},\"Showcase\"),\n            m(\"a\",{class:\"toplink\",href:\"/blog/\"},\"Blog\"),\n            m(\"a\",{class:\"toplink\",href:\"/store/\"},\"Store\"),\n            m(\"button\",{class:\"toplink Button Button--primary\",href:\"/sign-up/\"},\"Sign Up\"),\n        ])\n    }\n}\nm.mount(ktoprow, toprow);\n\n\n// this grabs the metadata for featured showcase videos\nvar showcaseurl = \"http://comm.site/blog/wp-json/wp/v2/posts/?categories=18&per_page=1&_fields=videolink,director,dp,editor,kinecamera\"\nvar tempvideo = '';\nvar tempser = ''\nvar metas = [];\nvar embedcode = '';\n\nvar pullmeta = {\n    content:[], // populated below\n    fetch: function() {\n        m.request({\n            method: \"GET\",\n            url: showcaseurl,\n        })\n        .then(function(data) {\n            pullmeta.content = data\n            metas = pullmeta.content[0]\n            tempvideo = (metas.videolink)\n            tempser = encode(tempvideo);\n        })\n        .then(pullclip.fetch)\n    }\n}\n\nfunction metarows(){\n    var metalist = [];\n    if(metas.director) metalist.push(m(\"span\", {class:\"meta-item\"},\"Director: \"+metas.director))\n    if(metas.dp) metalist.push(m(\"span\", {class:\"meta-item\"},\"DP: \"+metas.dp))\n    if(metas.editor) metalist.push(m(\"span\", {class:\"meta-item\"},\"Editor: \"+metas.editor))\n    if(metas.kinecamera) metalist.push(m(\"span\", {class:\"meta-item\"},\"Camera: \"+metas.kinecamera))\n    return metalist\n}\n\nfunction encode(uri) {\n    // make a switch statement\n    var ri = new RegExp('vimeo', 'i');\n    var vimeo = ri.test(uri);\n    var res = encodeURIComponent(uri);\n    if (vimeo) return 'https://vimeo.com/api/oembed.json?url='+res;\n    return 'http://www.youtube.com/oembed?url='+res+'&format=json';\n}\n\nvar cliphtml ='';\nvar pullclip = {\n    content:[],\n    fetch: function() {\n        // log: console.log('are we fetching?'),\n        m.request({\n            method: \"GET\",\n            url: tempser,\n        })\n        .then(function(data) {\n            //take received JSON and send it to a view\n            pullclip.content = data['html']\n            cliphtml = data['html']\n        })\n    }\n}\n\nfunction fingaz(){\n    var fingerlist = [];\n    for (let step = 0; step < 5; step++) {\n        var finger = m(\"div\",{class: \"colo finger\"+(step+1)},\"\");\n        fingerlist.push(finger);   \n    }\n    return fingerlist\n}\n\n\nvar ShowClip = {\n    oninit: // get the metadata and get the video, two separate calls\n    [pullmeta.fetch()],\n    onbeforeremove: function(vnode) {\n        vnode.dom.classList.add(\"fade-out\")\n        return new Promise(function(resolve) {\n            setTimeout(resolve, 1000)\n        })\n    },\n    view: function(vnode) {\n        return [\n            fingaz(),\n            m(\"div\", {class: \"showcasewrap\"}, \"\", [\n                m(\"h2\",{class: \"shotitle\"}, \"Showcase\"),\n                m(\"p\",{class:\"showcasemeta\"},metarows()),\n                m(\"p\",{class:\"howtosubmit\"},\"Submit using #Kinefinity on Vimeo or YouTube\"),\n                m(\"div\",{class: \"embedwrap\",ID:\"showembed\"}, [\n                    m.trust(cliphtml),\n                ]),\n            ])\n        ]\n    }\n}\n\nm.mount(showcase, ShowClip);\n\n\n\n/////////////////// Make the header smaller\n\nvar beenclicked = false;\n\napp.addEventListener('click', gothere, true); \nfunction gothere() {\n    if (!beenclicked) {\n        m.mount(showcase, null);\n        m.mount(newslist, null);\n        showcase.classList.add(\"gonzo\");\n        newslist.classList.add(\"gonzo\");\n        ktopheader.classList.add(\"shorter\");\n        document.body.removeEventListener('click', gothere, true);\n        beenclicked = true;\n    }\n    //console.log(\"beenclicked: \" + beenclicked);\n}\n\n\n/////////////////// work on Scrubber\n\nextend(DiscussionPage.prototype, 'config', function() {\n\n    // grab the scrubber, its height, and set an offset\n    var qscrub = this.element.querySelector('.DiscussionPage-nav > ul');\n    var scrubHeight = qscrub.scrollHeight;\n    var headHeight = ktopheader.scrollHeight;\n\n    // since the scrubber is created via JS the only way to access its margin\n    // is via its computed height in the browser, then convert it into a number\n    var navMargin = parseInt(window.getComputedStyle(qscrub).getPropertyValue(\"margin-top\"));\n\n    // set the scroll number where we want to fix the Scrubber\n    var sticky = scrubHeight+headHeight-navMargin;\n\n    var fheight = document.getElementById('bigfoot').offsetHeight;\n    var docheight = document.body.scrollHeight;\n    var stoppingPlace = docheight - navMargin - scrubHeight - fheight;\n\n\n\n    window.addEventListener('scroll', holdscrub, true); \n    //window.addEventListener('mouseup', holdscrub, true); \n\n    function holdscrub() {\n\n        if (window.scrollY < sticky) {\n            qscrub.classList.remove(\"fixit\");\n            qscrub.classList.remove(\"lowscrub\");\n        }\n\n        if (window.scrollY >= sticky && window.scrollY < stoppingPlace) {\n            qscrub.classList.add(\"fixit\");\n            qscrub.classList.remove(\"lowscrub\");\n            } else {\n            qscrub.classList.remove(\"fixit\");\n        }\n\n        if (window.scrollY >= stoppingPlace) {\n            qscrub.classList.add(\"lowscrub\");\n            qscrub.classList.remove(\"fixit\");\n        }\n\n    }\n\n});\n\n\nextend(HeaderPrimary.prototype, 'items', function(items) {\n    // items.add('google', <a href=\"https://google.com\">Google</a>);\n});\n    \n\n// Debugger that's no longer needed!!!\n\n//window.addEventListener('click', logvals, true); \n//function logvals() {\n    // console.log(\n    //     \"sticky : \" +sticky,\n    //     \"headheight : \" +headHeight,\n    //     \"qscrub : \" +qscrub.offsetTop,\n    //     \"navMargin : \" +navMargin\n    // );\n//}\n\n\n","module.exports = flarum.core;","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['components/HeaderPrimary'];","module.exports = flarum.core.compat['components/PostStreamScrubber'];","module.exports = flarum.core.compat['extend'];"],"sourceRoot":""}